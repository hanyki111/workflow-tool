# English message catalog for workflow-tool

app:
  name: "AI Workflow Engine"
  description: "Workflow Management Tool"
  version: "2.0.0"

help:
  main:
    description: "Workflow Management Tool - AI-Native development workflow engine"

  status:
    description: "Show current stage and checklist"
    oneline: "Print status in one line"

  next:
    description: "Move to next stage"
    target: "Target stage code (e.g., M1, P2)"
    force: "Force transition skipping rules (requires --token)"
    reason: "Reason for forced transition"
    token: "USER-APPROVE token (required for --force)"
    skip_conditions: "Skip plugin conditions (shell, fs) but still require all_checked"

  check:
    description: "Mark checklist items as done (supports Ralph Loop auto-retry)"
    indices: "Item indices (1-based)"
    tag: "Check items by tag (e.g., CMD:pytest) for shell wrapper automation"
    token: "Secret token for USER-APPROVE items"
    evidence: "Add audit evidence or justification"
    args: "Arguments for action command (e.g., commit message)"
    skip_action: "Skip action execution (manual override, also bypasses Ralph mode)"
    agent: "Pre-register agent review before check (e.g., --agent plan-critic)"
    epilog: |

      Ralph Loop Mode:
        Items with 'ralph' config in workflow.yaml will auto-retry on failure.
        Configure in workflow.yaml:

          checklist:
            - text: "Pass tests"
              action: "pytest"
              ralph:
                enabled: true
                max_retries: 5
                success_contains: ["PASS"]    # Optional: check output
                fail_contains: ["FAIL"]       # Optional: check output
                hint: "Fix the failing tests"

        On failure, outputs instructions for Task subagent to retry.
        Use --skip-action to bypass Ralph mode.
        See 'flow tutorial --section 4' for details.

      Cross-Platform Features:
        file_check: Declarative file content checking without shell commands.
        Platform action: Use 'unix', 'windows', or 'all' keys for platform-specific commands.

        Example (file_check):
          checklist:
            - text: "Review passed"
              file_check:
                path: ".workflow/reviews/critic.md"
                success_contains: ["APPROVED"]
                fail_if_missing: true

        Example (platform action):
          checklist:
            - text: "Build"
              action:
                unix: "make build"
                windows: "msbuild project.sln"
                all: "python build.py"  # Optional: same for all

  uncheck:
    description: "Unmark checklist items (reverse of check)"
    indices: "Item indices (1-based)"
    token: "Secret token for USER-APPROVE items"

  set:
    description: "Manually set current stage/module"
    stage: "Stage code (e.g., M1, P2)"
    module: "Set active module name"
    force: "Force stage change even with unchecked items (requires --token)"
    token: "USER-APPROVE token (required for --force)"

  review:
    description: "Record sub-agent review"
    agent: "Agent name (e.g., spec-validator)"
    summary: "Summary of the review findings"

  module:
    description: "Module management commands"
    set: "Set active module without changing stage"
    name: "Module name to set as active"

  secret_generate:
    description: "Interactively generate SHA-256 secret hash"

  install_alias:
    description: "Install shell alias"
    name: "Alias name"

  tutorial:
    description: "Interactive tutorial and documentation"
    list: "List all tutorial sections"
    section: "Jump to specific section number"
    section_name: "Section name to display"

  lang:
    description: "Set display language (en, ko)"

  init:
    description: "Initialize workflow in current directory"
    template: "Workflow template: simple or full (default: simple)"
    name: "Project name (default: directory name)"
    no_claude_md: "Skip creating CLAUDE.md (AI instructions)"
    no_guide: "Skip creating PROJECT_MANAGEMENT_GUIDE.md"
    force: "Overwrite existing files"
    list_templates: "Show available templates"

  track:
    description: "Parallel track management commands"
    create: "Create a new parallel track"
    id: "Track identifier (alphanumeric, hyphens, underscores)"
    label: "Human-readable label for the track"
    module: "Module name to assign to the track"
    stage: "Starting stage code (default: first stage)"
    list: "List all parallel tracks"
    switch: "Set active track for current session"
    join: "Join all completed tracks and clean up"
    delete: "Delete a specific track"
    force: "Force join even with incomplete tracks (requires --token)"
    token: "USER-APPROVE token (required for --force)"
    track_option: "Target track ID (overrides active track)"
    all_option: "Show all tracks summary"

  phase:
    description: "Phase DAG management commands"
    add: "Add a phase node to the DAG"
    id: "Phase identifier"
    label: "Human-readable label for the phase"
    module: "Module name for the phase"
    depends_on: "Comma-separated dependency phase IDs"
    list: "List all phase nodes with status"
    graph: "Show DAG level visualization"
    remove: "Remove a phase node from the DAG"

  install_wrappers:
    description: "Generate shell wrappers for automatic workflow integration"
    shell: "Target shell (bash, zsh, powershell, fish, auto)"
    list: "List wrappers without installing"
    dry_run: "Preview changes without applying"
    uninstall: "Remove installed wrappers"

commands:
  status:
    title: "Current Stage"
    stage: "Stage"
    module: "Active Module"
    checklist: "Checklist"
    no_checklist: "No checklist items"
    progress: "{checked}/{total} items completed"

  next:
    success: "Transitioned to {stage}: {label}"
    blocked: "Cannot transition: {reason}"
    no_target: "No valid transition from current stage"
    force_warning: "Forced transition (bypassing rules): {reason}"

  check:
    success: "Checked items: {items}"
    invalid_index: "Invalid index: {index}"
    already_checked: "Item {index} already checked"
    requires_token: "Item {index} requires USER-APPROVE token"
    invalid_token: "Invalid token for USER-APPROVE"

  uncheck:
    success: "Unchecked items: {items}"
    invalid_index: "Invalid index: {index}"
    already_unchecked: "Item {index} already unchecked"

  set:
    success: "Set stage to {stage}"
    invalid_stage: "Invalid stage: {stage}"

  review:
    success: "Recorded review from {agent}"
    logged: "Review logged to audit file"

  secret:
    prompt: "Enter your secret phrase: "
    confirm: "Confirm secret phrase: "
    mismatch: "Secrets do not match. Please try again."
    success: "Secret hash saved to {path}"
    instruction: "Use this secret with --token flag for USER-APPROVE items"

errors:
  config_not_found: "Configuration file not found: {path}"
  state_not_found: "State file not found, creating default"
  invalid_yaml: "Invalid YAML in config file: {error}"
  plugin_load_failed: "Failed to load plugin: {plugin}"
  unknown_command: "Unknown command: {command}"

tutorial:
  title: "AI Workflow Engine Tutorial"
  sections: "Available Sections"
  section_prefix: "Section {num}"
  navigation:
    next: "[N]ext"
    prev: "[P]revious"
    quit: "[Q]uit"
    menu: "[M]enu"
  prompt: "Enter choice: "
  completed: "Tutorial completed!"
  section_not_found: "Section not found: {name}"

# Controller messages
controller:
  status:
    not_initialized: "Workflow not initialized. Use 'set' command."
    stage_not_found: "Error: Current stage '{stage}' not found in config."
    header: "Current Stage: {code} ({label})"
    module: "Active Module: {module}"
    progress: "Progress: {checked}/{total} completed"
    next_check: "‚Üí Next: `flow check {indices}`"
    all_done: "‚Üí All items done! Run: `flow next`"

  check:
    token_required: "‚ùå Error: Token required for [USER-APPROVE] item."
    invalid_token: "‚ùå Error: Invalid token for: {text}"
    agent_not_found: "‚ùå Error: Agent review from '{agent}' not found in logs for current stage."
    action_failed: "‚ùå Action failed for item {index}: {error}"
    action_output_header: "   Output (last 10 lines):"
    action_output_line: "   | {line}"
    action_output_short: "   Output:"
    action_skip_hint: "   ‚Üí Use --skip-action to mark as done without running action"
    action_executed: "‚úÖ Action executed: {command}"
    action_output: "   Output: {output}"
    action_skipped: "‚ö†Ô∏è Action skipped for item {index}: {action}"
    checked: "Checked: {text}"
    invalid_index: "Invalid index: {index}"
    agent_registered: "‚ÑπÔ∏è  Agent review from '{agent}' registered."
    no_tag_match: "‚ÑπÔ∏è  No unchecked items found with tag: {tag}"
    tag_found: "‚ÑπÔ∏è  Found {count} items with tag {tag}: [{items}]"
    pattern_matched: "   ‚úì Success pattern matched: \"{pattern}\""
    fail_pattern_found: "Fail pattern found in output: \"{pattern}\""
    success_pattern_missing: "Success pattern not found in output"
    file_check_failed: "‚ùå File check failed for item {index}: {error}"
    file_check_executed: "‚úÖ File check passed: {path}"
    file_check_skipped: "‚ö†Ô∏è File check skipped for item {index}: {path}"

  uncheck:
    invalid_index: "Invalid index: {index}"
    already_unchecked: "Item {index} is already unchecked"
    token_required: "‚ùå Error: Token required for [USER-APPROVE] item."
    invalid_token: "‚ùå Error: Invalid token for: {text}"
    unchecked: "Unchecked: {text}"

  next:
    force_token_required: "‚ùå Error: --force requires USER-APPROVE token. Use: flow next --force --token YOUR_TOKEN --reason \"...\""
    force_invalid_token: "‚ùå Error: Invalid token for --force. USER-APPROVE required."
    force_reason_required: "‚ùå Error: A non-empty reason is mandatory for a forced transition."
    unchecked_items: "Cannot proceed. Unchecked items:"
    unchecked_item: "- {text}"
    end_of_sequence: "End of sequence. No next stage defined."
    invalid_target: "Invalid target '{target}'. Valid choices: {choices}"
    branching_point: "Branching point. Please specify target. Choices: {choices}"
    validation_failed: "Cannot proceed. System validation failed:"
    validation_error: "‚ùå {error}"
    success: "Transitioned to {stage}"
    success_forced: "‚ö†Ô∏è [FORCED] Transitioned to {stage}"
    success_skip_conditions: "‚ö†Ô∏è [SKIP-CONDITIONS] Transitioned to {stage}"

  set:
    invalid_stage: "‚ùå Error: Invalid stage '{stage}'. Valid stages: {valid_stages}"
    force_token_required: "‚ùå Error: --force requires USER-APPROVE token. Use: flow set STAGE --force --token YOUR_TOKEN"
    force_invalid_token: "‚ùå Error: Invalid token for --force."
    unchecked_remain: "‚ùå Cannot change stage: {count} unchecked items remain."
    unchecked_more: "  ... and {count} more"
    unchecked_override: "Use --force --token YOUR_TOKEN to override."
    success: "‚úÖ Stage set to {stage}"
    success_forced: "‚ö†Ô∏è [FORCED] Stage set to {stage}"
    success_module: " (module: {module})"
    dag_active_warning: "‚ö†Ô∏è DAG auto-transition is active. Direct move to '{stage}' may cause DAG state inconsistency. Use `flow next` instead. Force: `flow set {stage} --force --token TOKEN`"

  module:
    name_required: "‚ùå Error: Module name is required."
    changed: "‚úÖ Module changed: {old} ‚Üí {new}"

  track:
    invalid_id: "‚ùå Error: Invalid track ID '{id}'. Use alphanumeric characters, hyphens, or underscores only."
    duplicate_id: "‚ùå Error: Track '{id}' already exists."
    invalid_stage: "‚ùå Error: Invalid stage '{stage}'. Valid stages: {valid_stages}"
    created: "‚úÖ Track '{id}' created (label: {label}, stage: {stage})"
    no_tracks: "No parallel tracks defined."
    list_header: "Parallel Tracks: {count}"
    active_track: "Active track: {id}"
    not_found: "‚ùå Error: Track '{id}' not found."
    switched: "‚úÖ Active track set to '{id}'"
    join_incomplete: "‚ùå Cannot join: incomplete tracks remain:"
    join_force_hint: "Use --force --token YOUR_TOKEN to join anyway."
    join_token_required: "‚ùå Error: --force requires USER-APPROVE token."
    join_invalid_token: "‚ùå Error: Invalid token for forced join."
    joined: "‚úÖ All tracks joined and cleared: {tracks}"
    deleted: "‚úÖ Track '{id}' deleted."
    completed: "‚úÖ Track '{id}' completed (no more transitions available)."
    active_warning: "‚ö† {count} parallel track(s) active. Use `flow status --all` for details."

  phase:
    added: "‚úÖ Phase '{id}' added: {label} (module: {module})"
    duplicate_id: "‚ùå Error: Phase '{id}' already exists in graph."
    invalid_dependency: "‚ùå Error: Dependency '{dep}' does not exist in graph."
    cycle_detected: "‚ùå Error: Adding phase '{id}' would create invalid DAG: {error}"
    removed: "‚úÖ Phase '{id}' removed from graph."
    has_dependents: "‚ùå Error: Cannot remove phase '{id}': depended on by {dependents}"
    not_found: "‚ùå Error: Phase '{id}' not found in graph."
    no_phases: "No phases defined. Use `flow phase add` to create."
    list_header: "Phase DAG ({count} phases):"
    graph_header: "Phase DAG ({count} phases, {levels} levels):"
    graph_error: "‚ùå DAG error: {error}"

  phase_transition:
    sequential: "üîÑ Phase '{phase_id}' ({phase_label}) started. Module: {module}"
    fork: "üîÄ Fork: {count} parallel phases created ({tracks}). Starting at {stage}."
    waiting: "‚è≥ Phase complete. Waiting for other parallel phases. Use `flow track list` to see status."
    all_complete: "‚úÖ All phases complete! Proceed to milestone close: `flow next M4`"

  review:
    recorded: "‚úÖ Recorded review from agent '{agent}' for stage {stage}."

  action:
    args_required: "This action requires --args. Usage: flow check N --args \"your arguments\""
    timeout: "Action timed out after 5 minutes"
    no_platform_command: "No action defined for platform: {platform}"
    invalid_action_type: "Invalid action configuration"

  file_check:
    path_required: "Error: file_check requires a path"
    file_missing: "File not found: {path}"
    read_error: "Failed to read file {path}: {error}"
    fail_pattern_found: "Fail pattern found: \"{pattern}\""
    success_pattern_missing: "Success pattern not found in file"
    checked: "File check passed: {path}"

  ralph:
    header: "üîÑ [RALPH MODE] Action failed (attempt {attempt}/{max_retries})"
    goal: "Goal: Make this command succeed: `{action}`"
    error_section: "Error:"
    output_section: "Output (last part):"
    hint_section: "Hint:"
    instruction: "üìã Instructions for Task subagent:"
    instruction_1: "1. Analyze the error above and fix the code"
    instruction_2: "2. After fixing, run `flow check {index}` again"
    instruction_3: "3. Repeat until the action succeeds"
    file_check_goal: "Goal: Make the file check pass for: `{path}`"
    file_content_section: "File content (last part):"
    file_check_instruction_1: "1. Analyze the error and modify the file to pass the check"
    max_retries_exceeded: "‚ùå [RALPH MODE] Max retries exceeded for item {index} ({max_retries} attempts). Use --skip-action to force check."
    task_prompt: |
      You are in RALPH MODE. Your goal is to make the action succeed.

      Current attempt: {attempt}/{max_retries}
      Action: {action}

      Error:
      {error}

      Instructions:
      1. Analyze the error and fix the relevant code
      2. Run `flow check {index}` to retry
      3. If it fails again, analyze and fix again
      4. Continue until success or max retries

# CLI messages
cli:
  check_error: "‚ùå Error: Either indices or --tag is required"
  module_usage: "Usage: flow module set <name>"
  track_usage: "Usage: flow track <create|list|switch|join|delete>"
  phase_usage: "Usage: flow phase <add|list|graph|remove>"
  alias:
    no_config: "Could not find shell config file (.zshrc, .bashrc)."
    add_manually: "Please add this line manually:\n  {line}"
    already_exists: "Alias '{name}' already exists in {config}"
    success: "Success! Added alias '{name}' to {config}"
    activate: "Run this to activate: source {config}"

# Init messages
init:
  workflow_exists: "‚ö†Ô∏è  workflow.yaml already exists (use --force to overwrite)"
  workflow_created: "‚úÖ Created workflow.yaml ({template} template)"
  state_exists: "‚ö†Ô∏è  .workflow/state.json already exists"
  state_created: "‚úÖ Created .workflow/state.json (stage: {stage})"
  using_first_stage: "‚ÑπÔ∏è  Using first stage from workflow.yaml: {stage}"
  guide_exists: "‚ö†Ô∏è  PROJECT_MANAGEMENT_GUIDE.md already exists"
  guide_created: "‚úÖ Created .workflow/docs/PROJECT_MANAGEMENT_GUIDE.md"
  instructions_created: "‚úÖ Created .workflow/WORKFLOW_INSTRUCTIONS.md"
  claude_md_guidance: "üìã CLAUDE.md already exists. Add these lines:"
  claude_md_top: "1. At the TOP of CLAUDE.md, add:"
  claude_md_import: "   @import .workflow/ACTIVE_STATUS.md"
  claude_md_section: "2. Add the workflow section from:"
  claude_md_source: "   .workflow/WORKFLOW_INSTRUCTIONS.md"
  claude_md_created: "‚úÖ Created CLAUDE.md (minimal template)"
  gitignore_suggestion: "üí° Consider adding to .gitignore:"
  gitignore_create: "üí° Create .gitignore with:"
  success: "üéâ Project initialized with '{template}' workflow!"
  next_steps: "Next steps:"
  step_status: "  1. Run: flow status"
  step_secret: "  2. Run: flow secret-generate  (for USER-APPROVE)"
  step_work: "  3. Start working through the checklist"
  for_ai: "For AI assistants:"
  ai_claude_md: "  - CLAUDE.md contains workflow instructions"
  ai_status: "  - AI should run 'flow status' at start of each session"

# Auth messages
auth:
  title: "=== Workflow Secret Generation ==="
  prompt: "Enter plaintext token to hash: "
  confirm: "Confirm token: "
  empty_error: "Error: Token cannot be empty."
  mismatch_error: "Error: Tokens do not match."
  success: "Success: SHA-256 hash saved to {path}"

# Wrappers messages
wrappers:
  detected_shell: "Detected shell: {shell}"
  no_tags: "No [CMD:xxx] tags found in workflow.yaml"
  found_tags: "Found {count} command tags:"
  generating: "Generating wrappers..."
  created: "Created: {path}"
  removed: "Removed: {path}"
  not_found: "Not found: {path}"
  source_added: "Added source line to {config}"
  source_exists: "Source line already exists in {config}"
  no_source_found: "No source line found in {config}"
  success: "Wrappers installed! Activate with: source {config}"
  uninstalled: "Wrappers removed from {config}"
  list_header: "Wrappers to be generated:"
  list_item: "  {cmd} -> flow check --tag \"{tag}\""
  dry_run_header: "Dry run - changes that would be made:"
  would_create: "Would create: {path}"
  would_add_source: "Would add source line to: {config}"
  wrapper_preview: "Wrapper file content:"
  cmd_path_hint: "Add this directory to your PATH: {path}"
  cmd_path_instruction: "Run: set PATH=%PATH%;{path}"
  cmd_path_remove_hint: "Remember to remove the wrapper directory from your PATH"
